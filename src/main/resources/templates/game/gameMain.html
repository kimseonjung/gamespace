<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<th:block th:fragment="setContent(content)">
<head>
    <meta charset="UTF-8">

    <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/reset.css">
    <link rel="stylesheet" href="/css/common.css">



    <title>gamespace</title>



    <!-- jQuery library -->
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>

    <!-- Popper JS-->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>



</head>
<body>

<div id="game">
    <th:block th:replace="~{common/header :: header}"/>
</div>





    <section>
        <form action="/game/game"  method="post">

            <div th:each="category : ${categoryList}">
                <input th:text="${category.categoryName}" th:value="${category.categoryCode}" th:type="checkbox" name="categoryCode" th:class="cate-btn" >

            </div>

            <div th:each="tag : ${tagList}">
                <input th:text="${tag.tagName}" th:value="${tag.tagCode}" th:type="checkbox" name="tagNameBtn" th:class="cate-btn">
            </div>


            <div th:each="devices : ${devicesList}">
                <button th:text="${devices.devicesName}"></button>

            </div>
            <input type="submit" th:id="gosubmit">
        </form>

<!--            <div class="toggle" >-->
<!--                <form th:action="@{game}" method="get">-->
<!--                    <label for="pc"><input type="radio" name="category" id="pc" class="category" checked th:value="${devicesOne.devicesCode}"><div class="togg pc"><img src="/image/icon_dark/pc.svg" alt=""></div></label>-->
<!--                </form>-->
<!--                <form th:action="@{game}" method="get">-->
<!--                    <label for="mobile"><input type="radio" name="category" id="mobile" class="category" th:value="${devicesOne.devicesCode}"><div class="togg mobile"><img src="/image/icon_dark/mobile.svg" alt=""></div></label>-->
<!--                </form>-->
<!--                <form th:action="@{game}" method="get">-->
<!--                    <label for="console"><input type="radio" name="category" id="console" class="category" th:value="${devicesOne.devicesCode}"><div class="togg console"><img src="/image/icon_dark/console.svg" alt=""></div></label>-->
<!--                </form>-->
<!--            </div>-->

    </section>


    <section>

        <div th:each="game : ${gameInfoList}"> <!--th:class="t-body"-->
            <div th:text="${game.gameName}"></div>
            <div th:text="${game.categoryCode}"></div>
            <div th:text="${game.tagCode}"></div>
            <div th:text="${game.gameIntro}"></div>
        </div>


    </section>










<div class="footer">
    <th:block th:replace="~{common/footer :: footer}"/>
</div>

<script>
   // $('.cate-btn').click (function etest() {
   //
   //     const xhttp = new XMLHttpRequest();
   //     xhttp.onreadystatechange = function () {
   //         if (this.readyState == 4 && this.status == 200) {
   //             document.getElementById("t-body").innerHTML = this.responseText;
   //         }
   //     };
   //     xhttp.open("GET", document.getElementsByClassName('t-body')[0].innerHTML);
   //     xhttp.send();
   //
   //      console.log(xhttp);
   // })

   // function insertReplyFunc(){
   //
   //     // 댓글 등록시 필요한 정보들 생략
   //     // data["name"]=value (json) 형식으로 정보 저장
   //
   //     $.ajax({
   //         type : "post",
   //         url : "reply",
   //         data : JSON.stringify(data),
   //         dataType: "json",
   //         contentType:"application/json;charset=UTF-8",
   //         async : false,
   //         success : function(data) {
   //
   //             if (data.result == "ok") {
   //                 // 리스트 업데이트하는 getList()를 실행시킨다.
   //                 getList();
   //             }
   //
   //         },
   //         error : function(){
   //             alert("통신실패");
   //         }
   //     });
   //
   // }








   // $.ajax({
   //     type : 'get',           // 타입 (get, post, put 등등)
   //     url : '/game/game',           // 요청할 서버url
   //     async : true,            // 비동기화 여부 (default : true)
   //     headers : {              // Http header
   //         "Content-Type" : "application/json",
   //         "X-HTTP-Method-Override" : "POST"
   //     },
   //     dataType : 'text',       // 데이터 타입 (html, xml, json, text 등등)
   //     data : JSON.stringify({  // 보낼 데이터 (Object , String, Array)
   //         "no" : no,
   //         "name" : name,
   //         "nick" : nick
   //     }),
   //     success : function(result) { // 결과 성공 콜백함수
   //         console.log(result);
   //     },
   //     error : function(request, status, error) { // 결과 에러 콜백함수
   //         console.log(error)
   //     }
   // })

   $(document).ready(function (){
       $("#gosubmit").click(searchGameMainList);
   });
   function searchGameMainList() {
       console.log('test');
       jQuery.ajaxSettings.traditional = true;
       $.ajax({
           url: "game",             // 요청할 서버url
           type : "post", // 타입은 뭘 쓸거니?
           datatype : "json",

           // data : JSON.stringify({  // 보낼 데이터 (Object , String, Array)
           //
           // }),

           success: function(data, status, xhr) {    // 결과 성공 콜백함수
                console.log(data)

           },
           error: function(xhr, status, error) {   // 결과 에러 콜백함수
               console.log(error);
           }
       });
   };



















</script>

</body>
</th:block>
</html>