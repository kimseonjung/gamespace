<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.semi.gamespace.news.model.dao.NewsInfoMapper"> <!-- 메퍼위치하고  동일하게 네임스페이스 작성-->

    <resultMap id="newsInfoResultMap" type="com.semi.gamespace.news.model.dto.NewsDTO">
        <id property="newsCode" column="NEWS_CODE"/>
        <result property="newsTitle" column="NEWS_TITLE"/>
        <result property="newsView" column="NEWS_VIEW"/>
        <result property="newsDate" column="NEWS_DATE"/>
        <result property="newsContent" column="NEWS_CONTENT"/>
        <result property="gameName" column="GAME_NAME"/>
        <result property="memberName" column="MEMBER_NAME"/>
    </resultMap>
    
    <select id="selectAllNewsList" resultMap="newsInfoResultMap">
        SELECT
            A.NEWS_CODE,
            A.NEWS_TITLE,
            A.NEWS_VIEW,
            A.NEWS_DATE,
            A.NEWS_CONTENT,
            B.GAME_NAME,
            C.MEMBER_NAME
        FROM NEWS A
                 JOIN GAME_INFO B ON (A.GAME_CODE = B.GAME_CODE)
                 JOIN MEMBER C ON (A.MEMBER_CODE = C.MEMBER_CODE)
    </select>

    <select id="newsDetail" parameterType="String" resultMap="newsInfoResultMap">
        SELECT
            *
        FROM NEWS
        WHERE NEWS_CODE = #{news_code}
    </select>

    <insert id="registNewsInfo">
        INSERT
        INTO NEWS A
        (
            A.NEWS_CODE,
            A.NEWS_TITLE,
            A.NEWS_VIEW,
            A.NEWS_DATE,
            A.NEWS_CONTENT,
            A.GAME_CODE,
            A.MEMBER_CODE
        )
        VALUES
            (
            'NEW_'||NEWS_CODE_SEQ.NEXTVAL,
            #{newsTitle},
            '0',
            TO_DATE(SYSDATE, 'YYYY-MM-DD HH24:mi:SS'),
            #{newsContent},
            'GAM_1',
            'MEM_1'
            )
    </insert>


</mapper>